<!doctype html>
<html lang="en-us" data-theme="dark">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Gularen</title>
	<style>
		#split {
			margin: 0 auto;
			max-width: 1200px;
			display: flex;
			flex-direction: row;
		}

		#input,
		#output {
			overflow-y: scroll;
			padding: 12px 16px;
			width: 50%;
			flex-basis: 50%;
			height: 100vh;
		}

		#input {
			font-family: monospace;
			outline: 0;
			border: 0;
			border-right: 1px solid #333;
			tab-size: 4;
		}

		body {
			display: block !important;
			overflow: hidden;
		}

		.indent {
			padding-left: 32px;
		}
		.align-left {
			text-align: left;
		}
		.align-center {
			text-align: center;
		}
		.align-right {
			text-align: right;
		}

		ul.checklist {
			list-style: none;
		}

		ul.checklist>li>input[type=checkbox] {
			margin-bottom: 0;
		}
	</style>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"
		integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
</head>

<body>
	<div id="split">
		<textarea id="input" placeholder="type here..." autofocus></textarea>
		<div id="output">
		</div>
	</div>

	<script src="gularen.js"></script>
	<script>
		function transpile() {
			outputNode.innerHTML = Module.transpile(inputNode.value);
			// console.log(Module.transpile(inputNode.value));
		}

		Module.onRuntimeInitialized = () => {
			transpile();
		};

		const inputNode = document.getElementById("input");
		const outputNode = document.getElementById("output");

		inputNode.value = `
>>> Gularen
> Well-thought markup language

>> Comment
Now you see me ~ now you dont

>> Style, Punctuation Mark, And Line Break
Hello *darkness* _my old_ \`friend\`. <
I've come *to _talk \`with\` you_ again*.

"Hold the flashlight steady!" <
-- My Dad

>> Paragraph
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nullam ac magna et lectus tincidunt fermentum a in purus.
Nunc vel eros bibendum leo aliquet faucibus.

Cras tincidunt consequat vulputate.
Sed non bibendum erat, ut porta odio.
Aenean non libero non nisi hendrerit pretium.
Nulla euismod neque magna.
Aliquam congue velit ut felis suscipit fermentum.
Nulla aliquet eget sapien ac ultrices.

Sed lobortis libero id malesuada elementum.
Nam sagittis enim iaculis, ultricies ipsum vitae, eleifend libero.
Quisque luctus velit consectetur tellus feugiat porttitor.
Integer ut pulvinar nunc, quis dictum dolor.
Donec bibendum nec orci at fringilla.
Nulla quis sagittis nisl.
Aliquam quis ex eu purus blandit ornare.

>> Indentation
	I believe I can fly!
		Look mom no hand!

>> List

> Bullet List
- One
- Two
- Three

> Index List
1. One
2. Two
3. Three

> Check List
[ ] Todo
[v] Done
[x] Cancelled

>> Table
| First Name | Last Name | Age |
|------------|-----------|----:|
| Noor       |  Wachid   |  20 |
| Dori       |  Lorean   |  19 |

>> Resource

> Link
A link [https://github.com/noorwachid]
A labeled link [https://github.com/noorwachid](here)

> Image
![https://i.imgflip.com/7r6vdk.jpg]

>> Code

> Syntax Highlighting
--- js
function loadWebAssemblyFromURL(url) {
  return fetch(url)
    .then(response => response.arrayBuffer())
    .then(buffer => WebAssembly.instantiate(buffer))
    .then(module => module.instance);
}
---

> UML Diagram
--- mermaid
flowchart LR
    A[Hungry] --> B{Eat}
    B -- Yes --> C[Stuffed]
    B -- No --> D[Starving]
    C --> E[Dead]
    D --> E
---

> Math Notation
--- katex
F(\\omega) = \\int_{-\\infty}^{\\infty} f(t) \\, e^{-i\\omega t} \\, dt
---
`;

		inputNode.addEventListener('input', transpile);
		inputNode.addEventListener('keydown', function (e) {
			if (e.key == 'Tab') {
				e.preventDefault();
				var start = this.selectionStart;
				var end = this.selectionEnd;

				this.value = this.value.substring(0, start) + "\t" + this.value.substring(end);

				this.selectionStart = this.selectionEnd = start + 1;
				transpile();
			}
		});
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
	<script>hljs.highlightAll();</script>
	<script type="module">
		import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
		mermaid.initialize({
			startOnLoad: true
		});
		document.getElementById('input').addEventListener('input', () => {
			mermaid.init(undefined, '.language-presenter.mermaid');
		})
	</script>
	<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"
		integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx"
		crossorigin="anonymous"></script>
	<script>
		function renderKatex() {
			document.querySelectorAll('.language-presenter.katex').forEach(node => {
				katex.render(node.innerHTML, node);
				hljs.highlightAll();
			})
		}
		document.getElementById('input').addEventListener('input', renderKatex)
		document.addEventListener("DOMContentLoaded", () => {
			renderKatex();
		});
	</script>
</body>

</html>
